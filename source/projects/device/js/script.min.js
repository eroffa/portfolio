var aboutMap=document.querySelector(".about-map"),aboutFeedback=document.querySelector(".about-feedback"),formFeedback=document.querySelector(".modal-contact-form"),inputName=document.querySelector("[name=name]"),inputEmail=document.querySelector("[name=email]"),inputText=document.querySelector("[name=text]"),inputSubmit=document.querySelector(".modal-contact-submit"),modal=document.querySelectorAll(".modal"),modalContact=document.querySelector(".modal-contact"),modalMap=document.querySelector(".modal-map"),overlay=document.querySelector(".overlay"),modalClose=document.querySelectorAll(".modal-close"),isStorageSupport=!0,storageName="",storageEmail="";for(aboutFeedback.addEventListener("click",function(e){e.preventDefault();try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}modalContact.classList.contains("open")||overlay.classList.contains("open")||(overlay.classList.add("open"),modalContact.classList.add("open"),storageName&&storageEmail?(inputName.value=storageName,inputEmail.value=storageEmail,inputText.focus()):storageName?(inputName.value=storageName,inputEmail.focus()):storageEmail?(inputEmail.value=storageEmail,inputName.focus()):inputName.focus())}),formFeedback.addEventListener("submit",function(e){inputName.value?(inputName.classList.remove("input-error"),localStorage.setItem("name",inputName.value)):(e.preventDefault(),inputName.classList.remove("input-error"),inputName.offsetWidth=inputName.offsetWidth,inputName.classList.add("input-error"),inputName.placeholder="Это поле обязательно для заполнения"),inputEmail.value?(inputEmail.classList.remove("input-error"),localStorage.setItem("email",inputEmail.value)):(e.preventDefault(),inputEmail.classList.remove("input-error"),inputEmail.offsetWidth=inputEmail.offsetWidth,inputEmail.classList.add("input-error"),inputEmail.placeholder="Это поле обязательно для заполнения"),inputText.value||(e.preventDefault(),inputText.classList.remove("input-error"),inputText.offsetWidth=inputText.offsetWidth,inputText.classList.add("input-error"),inputText.placeholder="Это поле обязательно для заполнения"),inputName.value||inputEmail.value||inputText.value?inputEmail.value||inputText.value?inputText.focus():inputEmail.focus():inputName.focus()}),aboutMap.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.contains("open")||overlay.classList.contains("open")||(overlay.classList.add("open"),modalMap.classList.add("open"))}),i=0;i<modalClose.length;i++)modalClose[i].addEventListener("click",function(e){for(e.preventDefault(),j=0;j<modal.length;j++)modal[j].classList.contains("open")&&overlay.classList.contains("open")&&(overlay.classList.remove("open"),modal[j].classList.remove("open"))});window.addEventListener("keydown",function(e){if(27===e.keyCode)for(e.preventDefault(),i=0;i<modal.length;i++)modal[i].classList.contains("open")&&overlay.classList.contains("open")&&(overlay.classList.remove("open"),modal[i].classList.remove("open"))}),ymaps.ready(function(){var e=new ymaps.Map("map",{center:[55.68697956906804,37.52965449999998],zoom:16,controls:["zoomControl"]},{searchControlProvider:"yandex#search"}),t=new ymaps.Placemark(e.getCenter(),{hintContent:"Мы здесь",balloonContent:"Интерет магазин Device"},{iconLayout:"default#image",iconImageHref:"img/yandex.png",iconImageSize:[40,60],iconImageOffset:[-5,-38]});e.geoObjects.add(t)});
