var overlay=document.querySelector(".overlay"),mapImg=document.querySelector(".about-map"),feedbackButton=document.querySelector(".about-button"),closeButton=document.querySelectorAll(".modal-close"),addСart=document.querySelectorAll(".add-cart"),modal=document.querySelectorAll(".modal"),modalMap=document.querySelector(".modal-map"),modalContact=document.querySelector(".modal-contact"),modalSuccess=document.querySelector(".modal-success"),feedbackForm=document.querySelector(".form-contact"),inputName=document.querySelector(".modal-contact [name=name]"),inputEmail=document.querySelector(".modal-contact [name=email]"),inputText=document.querySelector(".modal-contact [name=text]"),isStorageSupport=!0,storageName="",storageEmail="";for(i=0;i<closeButton.length;i++)closeButton[i].addEventListener("click",function(e){e.preventDefault(),overlay&&overlay.classList.contains("modal-show")&&overlay.classList.remove("modal-show"),modalMap&&modalMap.classList.contains("modal-show")&&modalMap.classList.remove("modal-show"),modalContact&&modalContact.classList.contains("modal-show")&&modalContact.classList.remove("modal-show"),modalSuccess&&modalSuccess.classList.contains("modal-show")&&modalSuccess.classList.remove("modal-show")});for(mapImg&&mapImg.addEventListener("click",function(e){e.preventDefault(),overlay.classList.add("modal-show"),modalMap.classList.add("modal-show")}),feedbackButton&&feedbackButton.addEventListener("click",function(e){e.preventDefault();try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}overlay.classList.add("modal-show"),modalContact.classList.add("modal-show"),isStorageSupport&&(inputName.value=storageName,inputEmail.value=storageEmail),inputName.value||inputEmail.value||inputText.value?inputEmail.value||inputText.value?inputText.focus():inputEmail.focus():inputName.focus()}),feedbackForm&&feedbackForm.addEventListener("submit",function(e){inputName.value?(inputName.classList.remove("error"),localStorage.setItem("name",inputName.value)):(e.preventDefault(),inputName.classList.remove("error"),inputName.offsetWidth=inputName.offsetWidth,inputName.classList.add("error"),inputName.placeholder="Это поле обязательно для ввода"),inputEmail.value?(inputEmail.classList.remove("error"),localStorage.setItem("email",inputEmail.value)):(e.preventDefault(),inputEmail.classList.remove("error"),inputEmail.offsetWidth=inputName.offsetWidth,inputEmail.classList.add("error"),inputEmail.placeholder="Это поле обязательно для ввода"),inputText.value||(e.preventDefault(),inputText.classList.remove("error"),inputText.offsetWidth=inputName.offsetWidth,inputText.classList.add("error"),inputText.placeholder="Это поле обязательно для ввода"),inputName.value||inputEmail.value||inputText.value?inputEmail.value||inputText.value?inputText.focus():inputEmail.focus():inputName.focus()}),window.addEventListener("keydown",function(e){if(27===e.keyCode)for(e.preventDefault(),i=0;i<modal.length;i++)modal[i].classList.contains("modal-show")&&modal[i].classList.remove("modal-show"),overlay.classList.contains("modal-show")&&overlay.classList.remove("modal-show")}),i=0;i<addСart.length;i++)addСart[i].addEventListener("click",function(e){e.preventDefault(),modalSuccess.classList.contains("modal-show")?modalSuccess.classList.remove("modal-show"):modalSuccess.classList.add("modal-show")});ymaps.ready(function(){var e=new ymaps.Map("map",{center:[59.938631,30.323055],zoom:17,controls:["zoomControl"]},{searchControlProvider:"yandex#search"}),a=new ymaps.Placemark(e.getCenter(),{hintContent:"Мы тут",balloonContent:"Интернет магазин Техномарт"},{iconLayout:"default#image",iconImageHref:"img/metka.png",iconImageSize:[80,80],iconImageOffset:[-5,-38]});e.geoObjects.add(a)});
